<div class="flex flex-col col-span-full sm:col-span-6 bg-white dark:bg-gray-800 shadow-xs rounded-xl">
    <header class="px-5 py-4 border-b border-gray-100 dark:border-gray-700/60 flex items-center">
        <h2 class="font-semibold text-gray-800 dark:text-gray-100">Sales VS Refunds</h2>
        @* TODO: Migrate to use Tooltip component from AppBlueprint.UiKit.Components.Shared.Cruip *@
        @* <Tooltip Size="lg">
            <div class="text-sm">Sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit.</div>
        </Tooltip> *@
    </header>
    <div class="px-5 py-3">
        <div class="flex items-start">
            <div class="text-3xl font-bold text-gray-800 dark:text-gray-100 mr-2">+$6,796</div>
            <div class="text-sm font-medium text-red-700 px-1.5 bg-red-500/20 rounded-full">-34%</div>
        </div>
    </div>
    <!-- Chart -->
    <div class="grow">
        <canvas id="dashboard-card-09" width="595" height="248"></canvas>
    </div>
</div>

@using Microsoft.JSInterop
@inject IJSRuntime JS

@code {
    private List<string> labels = new()
    {
        "12-01-2022", "01-01-2023", "02-01-2023",
        "03-01-2023", "04-01-2023", "05-01-2023"
    };

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        try
        {
            if (firstRender)
            {
                var config = new
                {
                    data = new
                    {
                        labels = labels,
                        datasets = new[]
                        {
                            new
                            {
                                label = "Stack 1",
                                data = new[] { 6200, 9200, 6600, 8800, 5200, 9200 },
                                backgroundColor = "rgb(139, 92, 246)",
                                hoverBackgroundColor = "rgb(124, 58, 237)",
                                barPercentage = 0.66,
                                categoryPercentage = 0.66,
                                borderRadius = 4
                            },
                            new
                            {
                                label = "Stack 2",
                                data = new[] { -4000, -2600, -5350, -4000, -7500, -2000 },
                                backgroundColor = "rgb(199, 210, 254)",
                                hoverBackgroundColor = "rgb(165, 180, 252)",
                                barPercentage = 0.66,
                                categoryPercentage = 0.66,
                                borderRadius = 4
                            }
                        }
                    },
                    showYAxis = true,
                    showXAxis = true,
                    useTimeScale = true
                };

                await JS.InvokeVoidAsync("chartJsInterop.createBarChart", "dashboard-card-09", config);
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error in DashboardCard09: {ex.Message}");
        }
    }
}