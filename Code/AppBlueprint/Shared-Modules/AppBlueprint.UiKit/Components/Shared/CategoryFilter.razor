@namespace AppBlueprint.UiKit.Components.Shared

@* Category filter with clickable links - reusable for product categories, deal stages, etc. *@

<FilterGroup Title="@Title" Class="@Class">
    <ul class="text-sm font-medium space-y-2">
        @foreach (var category in Categories)
        {
            <li>
                <a class="@GetLinkClass(category)" href="@category.Url" @onclick="() => OnCategoryClick(category)" @onclick:preventDefault="@(!AllowNavigation)">
                    @category.Label
                </a>
            </li>
        }
    </ul>
</FilterGroup>

@code {
    /// <summary>
    /// Title of the filter section
    /// </summary>
    [Parameter]
    public string Title { get; set; } = "Categories";

    /// <summary>
    /// List of categories to display
    /// </summary>
    [Parameter, EditorRequired]
    public List<CategoryItem> Categories { get; set; } = new();

    /// <summary>
    /// Currently selected category value
    /// </summary>
    [Parameter]
    public string? SelectedValue { get; set; }

    /// <summary>
    /// Event callback when a category is selected
    /// </summary>
    [Parameter]
    public EventCallback<CategoryItem> OnCategorySelected { get; set; }

    /// <summary>
    /// Whether to allow actual navigation (default: false, use event callback instead)
    /// </summary>
    [Parameter]
    public bool AllowNavigation { get; set; } = false;

    /// <summary>
    /// Additional CSS classes
    /// </summary>
    [Parameter]
    public string? Class { get; set; }

    private string GetLinkClass(CategoryItem category)
    {
        bool isSelected = category.Value == SelectedValue;
        return isSelected
            ? "text-violet-500"
            : "text-gray-600 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-200";
    }

    private async Task OnCategoryClick(CategoryItem category)
    {
        SelectedValue = category.Value;
        await OnCategorySelected.InvokeAsync(category);
    }

    /// <summary>
    /// Model representing a category item
    /// </summary>
    public sealed class CategoryItem
    {
        public string Label { get; set; } = string.Empty;
        public string Value { get; set; } = string.Empty;
        public string Url { get; set; } = "#0";
    }
}
