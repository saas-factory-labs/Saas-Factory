@* Empty State component for when there's no data to display *@

<div class="@GetContainerClasses()">
    @* Icon *@
    @if (Icon != null)
    {
        <div class="@GetIconClasses()">
            @Icon
        </div>
    }
    else if (!string.IsNullOrEmpty(Preset))
    {
        <div class="@GetIconClasses()">
            @GetPresetIcon()
        </div>
    }

    @* Title *@
    @if (!string.IsNullOrEmpty(Title))
    {
        <h3 class="@GetTitleClasses()">@Title</h3>
    }

    @* Description *@
    @if (!string.IsNullOrEmpty(Description))
    {
        <p class="@GetDescriptionClasses()">@Description</p>
    }

    @* Custom content *@
    @if (ChildContent != null)
    {
        <div class="mt-4">
            @ChildContent
        </div>
    }

    @* Action buttons *@
    @if (PrimaryAction.HasDelegate || SecondaryAction.HasDelegate)
    {
        <div class="mt-6 flex flex-wrap items-center justify-center gap-3">
            @if (SecondaryAction.HasDelegate)
            {
                <button type="button"
                        class="btn bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 text-gray-600 dark:text-gray-300"
                        @onclick="SecondaryAction">
                    @SecondaryActionText
                </button>
            }
            @if (PrimaryAction.HasDelegate)
            {
                <button type="button"
                        class="btn bg-violet-500 hover:bg-violet-600 text-white"
                        @onclick="PrimaryAction">
                    @if (PrimaryActionIcon != null)
                    {
                        <span class="mr-2">@PrimaryActionIcon</span>
                    }
                    @PrimaryActionText
                </button>
            }
        </div>
    }
</div>

@code {
    [Parameter] public string? Title { get; set; }
    [Parameter] public string? Description { get; set; }
    [Parameter] public RenderFragment? Icon { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string Preset { get; set; } = ""; // no-data, no-results, error, no-access, empty-inbox, no-notifications
    [Parameter] public string Size { get; set; } = "md"; // sm, md, lg
    [Parameter] public bool Compact { get; set; } = false;

    [Parameter] public string PrimaryActionText { get; set; } = "Get Started";
    [Parameter] public EventCallback PrimaryAction { get; set; }
    [Parameter] public RenderFragment? PrimaryActionIcon { get; set; }
    [Parameter] public string SecondaryActionText { get; set; } = "Learn More";
    [Parameter] public EventCallback SecondaryAction { get; set; }

    private string GetContainerClasses()
    {
        var paddingClasses = Compact
            ? "py-8 px-4"
            : Size switch
            {
                "sm" => "py-10 px-6",
                "lg" => "py-20 px-8",
                _ => "py-16 px-6"
            };

        return $"flex flex-col items-center justify-center text-center {paddingClasses}";
    }

    private string GetIconClasses()
    {
        var sizeClasses = Size switch
        {
            "sm" => "w-12 h-12 mb-3",
            "lg" => "w-20 h-20 mb-6",
            _ => "w-16 h-16 mb-4"
        };

        return $"flex items-center justify-center {sizeClasses} rounded-full bg-gray-100 dark:bg-gray-700/50 text-gray-400 dark:text-gray-500";
    }

    private string GetTitleClasses()
    {
        var sizeClasses = Size switch
        {
            "sm" => "text-base",
            "lg" => "text-2xl",
            _ => "text-lg"
        };

        return $"{sizeClasses} font-semibold text-gray-800 dark:text-gray-100";
    }

    private string GetDescriptionClasses()
    {
        var sizeClasses = Size switch
        {
            "sm" => "text-xs mt-1",
            "lg" => "text-base mt-3",
            _ => "text-sm mt-2"
        };

        return $"{sizeClasses} text-gray-500 dark:text-gray-400 max-w-md";
    }

    private RenderFragment GetPresetIcon() => Preset switch
    {
        "no-results" => @<svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>,
        "error" => @<svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>,
        "no-access" => @<svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" /></svg>,
        "empty-inbox" => @<svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" /></svg>,
        "no-notifications" => @<svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>,
        _ => @<svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" /></svg>
    };
}
