@inject ThemeService ThemeService

@* Progress bar component with different sizes and colors *@

<div class="w-full">
    @if (!string.IsNullOrEmpty(Label))
    {
        <div class="flex justify-between items-center mb-1">
            <span class="text-sm font-medium text-gray-800 dark:text-gray-100">@Label</span>
            @if (ShowPercentage)
            {
                <span class="text-sm font-medium text-gray-500 dark:text-gray-400">@Value%</span>
            }
        </div>
    }
    <div class="@GetContainerClasses()" role="progressbar" aria-valuenow="@Value" aria-valuemin="0" aria-valuemax="100">
        <div class="@GetBarClasses()" style="width: @Value%"></div>
    </div>
</div>

@code {
    [Parameter] public int Value { get; set; } = 0;
    [Parameter] public string Label { get; set; } = "";
    [Parameter] public bool ShowPercentage { get; set; } = false;
    [Parameter] public string Variant { get; set; } = "violet"; // violet, sky, green, yellow, red, blue
    [Parameter] public string Size { get; set; } = "md"; // sm, md, lg

    private string GetContainerClasses()
    {
        var heightClass = Size switch
        {
            "sm" => "h-1.5",
            "lg" => "h-3",
            _ => "h-2"
        };
        return $"w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden {heightClass}";
    }

    private string GetBarClasses()
    {
        var colorClass = Variant switch
        {
            "accent" => ThemeService.GetAccentClass("bg", "500"),
            "green" => "bg-green-500",
            "yellow" => "bg-yellow-500",
            "red" => "bg-red-500",
            "blue" => "bg-blue-500",
            _ => ThemeService.GetPrimaryClass("bg", "500")
        };
        return $"h-full rounded-full transition-all duration-300 {colorClass}";
    }
}
