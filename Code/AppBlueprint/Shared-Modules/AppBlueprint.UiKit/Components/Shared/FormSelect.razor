@* Select dropdown component with label and validation *@

<div class="@ContainerClass">
    @if (!string.IsNullOrEmpty(Label))
    {
        <label class="block text-sm font-medium mb-1 @LabelClasses" for="@Id">
            @Label
            @if (Required)
            {
                <span class="text-red-500">*</span>
            }
        </label>
    }
    <select
        id="@Id"
        name="@Name"
        class="@GetSelectClasses()"
        disabled="@Disabled"
        required="@Required"
        @onchange="OnChange"
        @attributes="AdditionalAttributes">
        @if (!string.IsNullOrEmpty(Placeholder))
        {
            <option value="" disabled selected="@(string.IsNullOrEmpty(Value))">@Placeholder</option>
        }
        @if (ChildContent != null)
        {
            @ChildContent
        }
        @foreach (var option in Options)
        {
            <option value="@option.Value" selected="@(Value == option.Value)">@option.Label</option>
        }
    </select>
    @if (!string.IsNullOrEmpty(HelpText) && !HasError)
    {
        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">@HelpText</p>
    }
    @if (HasError && !string.IsNullOrEmpty(ErrorMessage))
    {
        <p class="text-xs text-red-500 mt-1">@ErrorMessage</p>
    }
</div>

@code {
    [Parameter] public string? Id { get; set; }
    [Parameter] public string? Name { get; set; }
    [Parameter] public string? Label { get; set; }
    [Parameter] public string? Placeholder { get; set; }
    [Parameter] public string? Value { get; set; }
    [Parameter] public EventCallback<string> ValueChanged { get; set; }
    [Parameter] public List<SelectOption> Options { get; set; } = new();
    [Parameter] public string? HelpText { get; set; }
    [Parameter] public string? ErrorMessage { get; set; }
    [Parameter] public bool HasError { get; set; } = false;
    [Parameter] public bool Disabled { get; set; } = false;
    [Parameter] public bool Required { get; set; } = false;
    [Parameter] public string Size { get; set; } = "md"; // sm, md, lg
    [Parameter] public string? ContainerClass { get; set; }
    [Parameter(CaptureUnmatchedValues = true)] public Dictionary<string, object>? AdditionalAttributes { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }

    private string LabelClasses => HasError ? "text-red-500" : "text-gray-800 dark:text-gray-100";

    private string GetSelectClasses()
    {
        var sizeClasses = Size switch
        {
            "sm" => "py-1.5 text-sm",
            "lg" => "py-3 text-base",
            _ => "py-2 text-sm"
        };

        var stateClasses = HasError
            ? "border-red-500 focus:border-red-500 focus:ring-red-500/20"
            : Disabled
                ? "border-gray-200 dark:border-gray-700/60 bg-gray-100 dark:bg-gray-900/50 text-gray-400 cursor-not-allowed"
                : "border-gray-200 dark:border-gray-700/60 hover:border-gray-300 dark:hover:border-gray-600 focus:border-violet-300 dark:focus:border-violet-500/50";

        return $"form-select w-full {sizeClasses} bg-white dark:bg-gray-800 {stateClasses} rounded-lg";
    }

    private async Task OnChange(ChangeEventArgs e)
    {
        Value = e.Value?.ToString();
        await ValueChanged.InvokeAsync(Value);
    }

    public class SelectOption
    {
        public string Value { get; set; } = "";
        public string Label { get; set; } = "";
    }

    public static List<SelectOption> GetCountries() => new()
    {
        new SelectOption { Value = "AF", Label = "Afghanistan" },
        new SelectOption { Value = "AX", Label = "Ã…land Islands" },
        new SelectOption { Value = "AL", Label = "Albania" },
        new SelectOption { Value = "DZ", Label = "Algeria" },
        new SelectOption { Value = "AS", Label = "American Samoa" },
        new SelectOption { Value = "AD", Label = "Andorra" },
        new SelectOption { Value = "AO", Label = "Angola" },
        new SelectOption { Value = "AI", Label = "Anguilla" },
        new SelectOption { Value = "AQ", Label = "Antarctica" },
        new SelectOption { Value = "AG", Label = "Antigua and Barbuda" },
        new SelectOption { Value = "AR", Label = "Argentina" },
        new SelectOption { Value = "AM", Label = "Armenia" },
        new SelectOption { Value = "AW", Label = "Aruba" },
        new SelectOption { Value = "AU", Label = "Australia" },
        new SelectOption { Value = "AT", Label = "Austria" },
        new SelectOption { Value = "AZ", Label = "Azerbaijan" },
        new SelectOption { Value = "BS", Label = "Bahamas" },
        new SelectOption { Value = "BH", Label = "Bahrain" },
        new SelectOption { Value = "BD", Label = "Bangladesh" },
        new SelectOption { Value = "BB", Label = "Barbados" },
        new SelectOption { Value = "BY", Label = "Belarus" },
        new SelectOption { Value = "BE", Label = "Belgium" },
        new SelectOption { Value = "BZ", Label = "Belize" },
        new SelectOption { Value = "BJ", Label = "Benin" },
        new SelectOption { Value = "BM", Label = "Bermuda" },
        new SelectOption { Value = "BT", Label = "Bhutan" },
        new SelectOption { Value = "BO", Label = "Bolivia" },
        new SelectOption { Value = "BA", Label = "Bosnia and Herzegovina" },
        new SelectOption { Value = "BW", Label = "Botswana" },
        new SelectOption { Value = "BV", Label = "Bouvet Island" },
        new SelectOption { Value = "BR", Label = "Brazil" },
        new SelectOption { Value = "IO", Label = "British Indian Ocean Territory" },
        new SelectOption { Value = "BN", Label = "Brunei Darussalam" },
        new SelectOption { Value = "BG", Label = "Bulgaria" },
        new SelectOption { Value = "BF", Label = "Burkina Faso" },
        new SelectOption { Value = "BI", Label = "Burundi" },
        new SelectOption { Value = "KH", Label = "Cambodia" },
        new SelectOption { Value = "CM", Label = "Cameroon" },
        new SelectOption { Value = "CA", Label = "Canada" },
        new SelectOption { Value = "CV", Label = "Cape Verde" },
        new SelectOption { Value = "KY", Label = "Cayman Islands" },
        new SelectOption { Value = "CF", Label = "Central African Republic" },
        new SelectOption { Value = "TD", Label = "Chad" },
        new SelectOption { Value = "CL", Label = "Chile" },
        new SelectOption { Value = "CN", Label = "China" },
        new SelectOption { Value = "CX", Label = "Christmas Island" },
        new SelectOption { Value = "CC", Label = "Cocos (Keeling) Islands" },
        new SelectOption { Value = "CO", Label = "Colombia" },
        new SelectOption { Value = "KM", Label = "Comoros" },
        new SelectOption { Value = "CG", Label = "Congo" },
        new SelectOption { Value = "CD", Label = "Congo, The Democratic Republic of The" },
        new SelectOption { Value = "CK", Label = "Cook Islands" },
        new SelectOption { Value = "CR", Label = "Costa Rica" },
        new SelectOption { Value = "CI", Label = "Cote D'ivoire" },
        new SelectOption { Value = "HR", Label = "Croatia" },
        new SelectOption { Value = "CU", Label = "Cuba" },
        new SelectOption { Value = "CY", Label = "Cyprus" },
        new SelectOption { Value = "CZ", Label = "Czech Republic" },
        new SelectOption { Value = "DK", Label = "Denmark" },
        new SelectOption { Value = "DJ", Label = "Djibouti" },
        new SelectOption { Value = "DM", Label = "Dominica" },
        new SelectOption { Value = "DO", Label = "Dominican Republic" },
        new SelectOption { Value = "EC", Label = "Ecuador" },
        new SelectOption { Value = "EG", Label = "Egypt" },
        new SelectOption { Value = "SV", Label = "El Salvador" },
        new SelectOption { Value = "GQ", Label = "Equatorial Guinea" },
        new SelectOption { Value = "ER", Label = "Eritrea" },
        new SelectOption { Value = "EE", Label = "Estonia" },
        new SelectOption { Value = "ET", Label = "Ethiopia" },
        new SelectOption { Value = "FK", Label = "Falkland Islands (Malvinas)" },
        new SelectOption { Value = "FO", Label = "Faroe Islands" },
        new SelectOption { Value = "FJ", Label = "Fiji" },
        new SelectOption { Value = "FI", Label = "Finland" },
        new SelectOption { Value = "FR", Label = "France" },
        new SelectOption { Value = "GF", Label = "French Guiana" },
        new SelectOption { Value = "PF", Label = "French Polynesia" },
        new SelectOption { Value = "TF", Label = "French Southern Territories" },
        new SelectOption { Value = "GA", Label = "Gabon" },
        new SelectOption { Value = "GM", Label = "Gambia" },
        new SelectOption { Value = "GE", Label = "Georgia" },
        new SelectOption { Value = "DE", Label = "Germany" },
        new SelectOption { Value = "GH", Label = "Ghana" },
        new SelectOption { Value = "GI", Label = "Gibraltar" },
        new SelectOption { Value = "GR", Label = "Greece" },
        new SelectOption { Value = "GL", Label = "Greenland" },
        new SelectOption { Value = "GD", Label = "Grenada" },
        new SelectOption { Value = "GP", Label = "Guadeloupe" },
        new SelectOption { Value = "GU", Label = "Guam" },
        new SelectOption { Value = "GT", Label = "Guatemala" },
        new SelectOption { Value = "GG", Label = "Guernsey" },
        new SelectOption { Value = "GN", Label = "Guinea" },
        new SelectOption { Value = "GW", Label = "Guinea-bissau" },
        new SelectOption { Value = "GY", Label = "Guyana" },
        new SelectOption { Value = "HT", Label = "Haiti" },
        new SelectOption { Value = "HM", Label = "Heard Island and Mcdonald Islands" },
        new SelectOption { Value = "VA", Label = "Holy See (Vatican City State)" },
        new SelectOption { Value = "HN", Label = "Honduras" },
        new SelectOption { Value = "HK", Label = "Hong Kong" },
        new SelectOption { Value = "HU", Label = "Hungary" },
        new SelectOption { Value = "IS", Label = "Iceland" },
        new SelectOption { Value = "IN", Label = "India" },
        new SelectOption { Value = "ID", Label = "Indonesia" },
        new SelectOption { Value = "IR", Label = "Iran, Islamic Republic of" },
        new SelectOption { Value = "IQ", Label = "Iraq" },
        new SelectOption { Value = "IE", Label = "Ireland" },
        new SelectOption { Value = "IM", Label = "Isle of Man" },
        new SelectOption { Value = "IL", Label = "Israel" },
        new SelectOption { Value = "IT", Label = "Italy" },
        new SelectOption { Value = "JM", Label = "Jamaica" },
        new SelectOption { Value = "JP", Label = "Japan" },
        new SelectOption { Value = "JE", Label = "Jersey" },
        new SelectOption { Value = "JO", Label = "Jordan" },
        new SelectOption { Value = "KZ", Label = "Kazakhstan" },
        new SelectOption { Value = "KE", Label = "Kenya" },
        new SelectOption { Value = "KI", Label = "Kiribati" },
        new SelectOption { Value = "KP", Label = "Korea, Democratic People's Republic of" },
        new SelectOption { Value = "KR", Label = "Korea, Republic of" },
        new SelectOption { Value = "KW", Label = "Kuwait" },
        new SelectOption { Value = "KG", Label = "Kyrgyzstan" },
        new SelectOption { Value = "LA", Label = "Lao People's Democratic Republic" },
        new SelectOption { Value = "LV", Label = "Latvia" },
        new SelectOption { Value = "LB", Label = "Lebanon" },
        new SelectOption { Value = "LS", Label = "Lesotho" },
        new SelectOption { Value = "LR", Label = "Liberia" },
        new SelectOption { Value = "LY", Label = "Libyan Arab Jamahiriya" },
        new SelectOption { Value = "LI", Label = "Liechtenstein" },
        new SelectOption { Value = "LT", Label = "Lithuania" },
        new SelectOption { Value = "LU", Label = "Luxembourg" },
        new SelectOption { Value = "MO", Label = "Macao" },
        new SelectOption { Value = "MK", Label = "Macedonia, The Former Yugoslav Republic of" },
        new SelectOption { Value = "MG", Label = "Madagascar" },
        new SelectOption { Value = "MW", Label = "Malawi" },
        new SelectOption { Value = "MY", Label = "Malaysia" },
        new SelectOption { Value = "MV", Label = "Maldives" },
        new SelectOption { Value = "ML", Label = "Mali" },
        new SelectOption { Value = "MT", Label = "Malta" },
        new SelectOption { Value = "MH", Label = "Marshall Islands" },
        new SelectOption { Value = "MQ", Label = "Martinique" },
        new SelectOption { Value = "MR", Label = "Mauritania" },
        new SelectOption { Value = "MU", Label = "Mauritius" },
        new SelectOption { Value = "YT", Label = "Mayotte" },
        new SelectOption { Value = "MX", Label = "Mexico" },
        new SelectOption { Value = "FM", Label = "Micronesia, Federated States of" },
        new SelectOption { Value = "MD", Label = "Moldova, Republic of" },
        new SelectOption { Value = "MC", Label = "Monaco" },
        new SelectOption { Value = "MN", Label = "Mongolia" },
        new SelectOption { Value = "ME", Label = "Montenegro" },
        new SelectOption { Value = "MS", Label = "Montserrat" },
        new SelectOption { Value = "MA", Label = "Morocco" },
        new SelectOption { Value = "MZ", Label = "Mozambique" },
        new SelectOption { Value = "MM", Label = "Myanmar" },
        new SelectOption { Value = "NA", Label = "Namibia" },
        new SelectOption { Value = "NR", Label = "Nauru" },
        new SelectOption { Value = "NP", Label = "Nepal" },
        new SelectOption { Value = "NL", Label = "Netherlands" },
        new SelectOption { Value = "AN", Label = "Netherlands Antilles" },
        new SelectOption { Value = "NC", Label = "New Caledonia" },
        new SelectOption { Value = "NZ", Label = "New Zealand" },
        new SelectOption { Value = "NI", Label = "Nicaragua" },
        new SelectOption { Value = "NE", Label = "Niger" },
        new SelectOption { Value = "NG", Label = "Nigeria" },
        new SelectOption { Value = "NU", Label = "Niue" },
        new SelectOption { Value = "NF", Label = "Norfolk Island" },
        new SelectOption { Value = "MP", Label = "Northern Mariana Islands" },
        new SelectOption { Value = "NO", Label = "Norway" },
        new SelectOption { Value = "OM", Label = "Oman" },
        new SelectOption { Value = "PK", Label = "Pakistan" },
        new SelectOption { Value = "PW", Label = "Palau" },
        new SelectOption { Value = "PS", Label = "Palestinian Territory, Occupied" },
        new SelectOption { Value = "PA", Label = "Panama" },
        new SelectOption { Value = "PG", Label = "Papua New Guinea" },
        new SelectOption { Value = "PY", Label = "Paraguay" },
        new SelectOption { Value = "PE", Label = "Peru" },
        new SelectOption { Value = "PH", Label = "Philippines" },
        new SelectOption { Value = "PN", Label = "Pitcairn" },
        new SelectOption { Value = "PL", Label = "Poland" },
        new SelectOption { Value = "PT", Label = "Portugal" },
        new SelectOption { Value = "PR", Label = "Puerto Rico" },
        new SelectOption { Value = "QA", Label = "Qatar" },
        new SelectOption { Value = "RE", Label = "Reunion" },
        new SelectOption { Value = "RO", Label = "Romania" },
        new SelectOption { Value = "RU", Label = "Russian Federation" },
        new SelectOption { Value = "RW", Label = "Rwanda" },
        new SelectOption { Value = "SH", Label = "Saint Helena" },
        new SelectOption { Value = "KN", Label = "Saint Kitts and Nevis" },
        new SelectOption { Value = "LC", Label = "Saint Lucia" },
        new SelectOption { Value = "PM", Label = "Saint Pierre and Miquelon" },
        new SelectOption { Value = "VC", Label = "Saint Vincent and The Grenadines" },
        new SelectOption { Value = "WS", Label = "Samoa" },
        new SelectOption { Value = "SM", Label = "San Marino" },
        new SelectOption { Value = "ST", Label = "Sao Tome and Principe" },
        new SelectOption { Value = "SA", Label = "Saudi Arabia" },
        new SelectOption { Value = "SN", Label = "Senegal" },
        new SelectOption { Value = "RS", Label = "Serbia" },
        new SelectOption { Value = "SC", Label = "Seychelles" },
        new SelectOption { Value = "SL", Label = "Sierra Leone" },
        new SelectOption { Value = "SG", Label = "Singapore" },
        new SelectOption { Value = "SK", Label = "Slovakia" },
        new SelectOption { Value = "SI", Label = "Slovenia" },
        new SelectOption { Value = "SB", Label = "Solomon Islands" },
        new SelectOption { Value = "SO", Label = "Somalia" },
        new SelectOption { Value = "ZA", Label = "South Africa" },
        new SelectOption { Value = "GS", Label = "South Georgia and The South Sandwich Islands" },
        new SelectOption { Value = "ES", Label = "Spain" },
        new SelectOption { Value = "LK", Label = "Sri Lanka" },
        new SelectOption { Value = "SD", Label = "Sudan" },
        new SelectOption { Value = "SR", Label = "Suriname" },
        new SelectOption { Value = "SJ", Label = "Svalbard and Jan Mayen" },
        new SelectOption { Value = "SZ", Label = "Swaziland" },
        new SelectOption { Value = "SE", Label = "Sweden" },
        new SelectOption { Value = "CH", Label = "Switzerland" },
        new SelectOption { Value = "SY", Label = "Syrian Arab Republic" },
        new SelectOption { Value = "TW", Label = "Taiwan, Province of China" },
        new SelectOption { Value = "TJ", Label = "Tajikistan" },
        new SelectOption { Value = "TZ", Label = "Tanzania, United Republic of" },
        new SelectOption { Value = "TH", Label = "Thailand" },
        new SelectOption { Value = "TL", Label = "Timor-leste" },
        new SelectOption { Value = "TG", Label = "Togo" },
        new SelectOption { Value = "TK", Label = "Tokelau" },
        new SelectOption { Value = "TO", Label = "Tonga" },
        new SelectOption { Value = "TT", Label = "Trinidad and Tobago" },
        new SelectOption { Value = "TN", Label = "Tunisia" },
        new SelectOption { Value = "TR", Label = "Turkey" },
        new SelectOption { Value = "TM", Label = "Turkmenistan" },
        new SelectOption { Value = "TC", Label = "Turks and Caicos Islands" },
        new SelectOption { Value = "TV", Label = "Tuvalu" },
        new SelectOption { Value = "UG", Label = "Uganda" },
        new SelectOption { Value = "UA", Label = "Ukraine" },
        new SelectOption { Value = "AE", Label = "United Arab Emirates" },
        new SelectOption { Value = "GB", Label = "United Kingdom" },
        new SelectOption { Value = "US", Label = "United States" },
        new SelectOption { Value = "UM", Label = "United States Minor Outlying Islands" },
        new SelectOption { Value = "UY", Label = "Uruguay" },
        new SelectOption { Value = "UZ", Label = "Uzbekistan" },
        new SelectOption { Value = "VU", Label = "Vanuatu" },
        new SelectOption { Value = "VE", Label = "Venezuela" },
        new SelectOption { Value = "VN", Label = "Viet Nam" },
        new SelectOption { Value = "VG", Label = "Virgin Islands, British" },
        new SelectOption { Value = "VI", Label = "Virgin Islands, U.S." },
        new SelectOption { Value = "WF", Label = "Wallis and Futuna" },
        new SelectOption { Value = "EH", Label = "Western Sahara" },
        new SelectOption { Value = "YE", Label = "Yemen" },
        new SelectOption { Value = "ZM", Label = "Zambia" },
        new SelectOption { Value = "ZW", Label = "Zimbabwe" }
    };
}
