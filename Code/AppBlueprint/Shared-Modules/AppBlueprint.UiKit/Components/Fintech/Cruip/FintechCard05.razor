@namespace AppBlueprint.UiKit.Components.Fintech.Cruip

@using AppBlueprint.UiKit.Components.Shared

<div class="col-span-full xl:col-span-6 bg-white dark:bg-gray-800 shadow-xs rounded-xl">
    <header class="px-5 py-4 border-b border-gray-100 dark:border-gray-700/60">
        <h2 class="font-semibold text-gray-800 dark:text-gray-100">Recent Expenses</h2>
    </header>
    <div class="p-3">
        <!-- Table -->
        <div class="overflow-x-auto">
            <table class="table-auto w-full dark:text-gray-300">
                <!-- Table header -->
                <thead class="text-xs uppercase text-gray-400 dark:text-gray-500 bg-gray-50 dark:bg-gray-700/50 rounded-xs">
                <tr>
                    <th class="p-2 whitespace-nowrap">
                        <div class="font-semibold text-left">Description</div>
                    </th>
                    <th class="p-2 whitespace-nowrap">
                        <div class="font-semibold text-left">Category</div>
                    </th>
                    <th class="p-2 whitespace-nowrap">
                        <div class="font-semibold text-right">Amount</div>
                    </th>
                </tr>
                </thead>
                <!-- Table body -->
                <tbody class="text-sm divide-y divide-gray-100 dark:divide-gray-700/60">
                @foreach (var transaction in _expenses)
                {
                    <TransactionListItem Description="@transaction.Description"
                                         Amount="@transaction.Amount"
                                         Type="expense"
                                         Category="@transaction.Category"
                                         IconSvg="@ExpenseIcon" />
                }
                </tbody>
            </table>
        </div>
    </div>
</div>

@code {
    private readonly List<ExpenseModel> _expenses =
    [
        new("Amazon Purchase", -1299.22m, "Shopping"),
        new("PublicOne Inc.", -272.88m, "Services"),
        new("Imperial Hotel ****", -999.44m, "Travels"),
        new("Uber", -1029.77m, "Transport"),
        new("Google Limited UK", -1921.26m, "Software")
    ];

    private const string ExpenseIcon = """
        <svg class="w-4 h-4 fill-current text-white" viewBox="0 0 16 16">
            <path d="M7.3 11.7l.7-.7-2.8-2.8H12v-1H5.2l2.8-2.8-.7-.7L3.5 7.5z"/>
        </svg>
        """;

    private sealed record ExpenseModel(string Description, decimal Amount, string Category);
}
