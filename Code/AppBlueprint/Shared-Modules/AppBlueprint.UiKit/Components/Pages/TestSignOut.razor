@page "/test-signout"
@inject NavigationManager NavigationManager

<PageTitle>Test Sign-Out</PageTitle>

<MudContainer MaxWidth="MaxWidth.Small" Class="mt-8">
    <MudPaper Class="pa-8" Elevation="4">
        <MudText Typo="Typo.h4" Class="mb-4">Sign-Out Test Page</MudText>
        
        <MudText Class="mb-4">
            This page has simple buttons to test different sign-out methods directly.
        </MudText>
        
        <MudDivider Class="my-4" />
        
        <MudText Typo="Typo.h6" Class="mb-2">Current URL:</MudText>
        <MudText Class="mb-4"><code>@NavigationManager.Uri</code></MudText>
        
        <MudDivider Class="my-4" />
        
        <MudText Typo="Typo.h6" Class="mb-4">Test Methods:</MudText>
        
        <MudStack Spacing="3">
            <MudButton Variant="Variant.Filled" 
                       Color="Color.Error" 
                       FullWidth="true"
                       Href="/SignOut">
                Method 1: Direct Link to /SignOut
            </MudButton>
            
            <MudButton Variant="Variant.Filled" 
                       Color="Color.Warning" 
                       FullWidth="true"
                       Href="/SignOut/Local">
                Method 2: Direct Link to /SignOut/Local
            </MudButton>
            
            <MudButton Variant="Variant.Filled" 
                       Color="Color.Primary" 
                       FullWidth="true"
                       OnClick="TestNavigationManager">
                Method 3: NavigationManager.NavigateTo("/SignOut", forceLoad: true)
            </MudButton>
            
            <MudButton Variant="Variant.Outlined" 
                       Color="Color.Secondary" 
                       FullWidth="true"
                       OnClick="TestNavigationManagerNoForce">
                Method 4: NavigationManager.NavigateTo("/SignOut", forceLoad: false)
            </MudButton>
        </MudStack>
        
        <MudDivider Class="my-4" />
        
        <MudText Typo="Typo.body2" Color="Color.Info">
            <strong>Instructions:</strong><br/>
            1. Make sure you're logged in<br/>
            2. Click one of the buttons above<br/>
            3. Watch the server console for output<br/>
            4. See where you end up
        </MudText>
    </MudPaper>
</MudContainer>

@code {
    private void TestNavigationManager()
    {
        Console.WriteLine("[TestSignOut] Testing NavigationManager with forceLoad=true");
        NavigationManager.NavigateTo("/SignOut", forceLoad: true);
    }
    
    private void TestNavigationManagerNoForce()
    {
        Console.WriteLine("[TestSignOut] Testing NavigationManager with forceLoad=false");
        NavigationManager.NavigateTo("/SignOut", forceLoad: false);
    }
}

