<div class="flex flex-col col-span-full sm:col-span-6 bg-white dark:bg-gray-800 shadow-xs rounded-xl">
    <header class="px-5 py-4 border-b border-gray-100 dark:border-gray-700/60">
        <h2 class="font-semibold text-gray-800 dark:text-gray-100">Direct VS Indirect</h2>
    </header>
    <div class="px-5 py-3">
        <div class="flex flex-wrap gap-8">
            <div class="flex items-center">
                <div class="w-3 h-3 border-2 border-sky-500 rounded-full mr-2"></div>
                <div class="text-3xl font-bold text-gray-800 dark:text-gray-100 mr-2">@($"${(DirectTotal / 1000):0.##}K")</div>
                <div class="text-sm font-medium text-gray-500 dark:text-gray-400">Direct</div>
            </div>
            <div class="flex items-center">
                <div class="w-3 h-3 border-2 border-violet-500 rounded-full mr-2"></div>
                <div class="text-3xl font-bold text-gray-800 dark:text-gray-100 mr-2">@($"${(IndirectTotal / 1000):0.##}K")</div>
                <div class="text-sm font-medium text-gray-500 dark:text-gray-400">Indirect</div>
            </div>
        </div>
    </div>
    <!-- Chart -->
    <div class="grow p-3">
        <MosaicPortal.Web.Components.Charts.BarChart
            CanvasId="dashboard-card-04-chart"
            Labels="@labels"
            Datasets="@datasets"
            Width="595"
            Height="248"
            UseTimeScale="true"/>
    </div>
</div>

@code {

    private List<string> labels = new()
    {
        "12-01-2022", "01-01-2023", "02-01-2023",
        "03-01-2023", "04-01-2023", "05-01-2023"
    };

    private List<MosaicPortal.Web.Components.Charts.BarChart.BarChartDataset> datasets = new()
    {
        new()
        {
            Label = "Direct",
            Data = new List<double> { 800, 1600, 900, 1300, 1950, 1700 },
            BackgroundColor = "rgb(14, 165, 233)",
            HoverBackgroundColor = "rgb(2, 132, 199)",
            BarPercentage = 0.7,
            CategoryPercentage = 0.7,
            BorderRadius = 4
        },
        new()
        {
            Label = "Indirect",
            Data = new List<double> { 4900, 2600, 5350, 4800, 5200, 4800 },
            BackgroundColor = "rgb(139, 92, 246)",
            HoverBackgroundColor = "rgb(124, 58, 237)",
            BarPercentage = 0.7,
            CategoryPercentage = 0.7,
            BorderRadius = 4
        }
    };

    private double DirectTotal => datasets[0].Data.Sum();
    private double IndirectTotal => datasets[1].Data.Sum();
}
