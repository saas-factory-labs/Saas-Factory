@using MosaicPortal.Web.Components.Charts

<div class="flex flex-col col-span-full sm:col-span-12 xl:col-span-4 bg-white dark:bg-gray-800 shadow-xs rounded-xl">
    <header class="px-5 py-4 border-b border-gray-100 dark:border-gray-700/60 flex items-center">
        <h2 class="font-semibold text-gray-800 dark:text-gray-100">Saving Goals</h2>
    </header>
    <div class="px-5 py-3">
        <div class="text-sm italic mb-2">Hey Mark, you're very close to your goal:</div>
        <div class="flex items-center">
            <div class="text-3xl font-bold text-gray-800 dark:text-gray-100 mr-2">$5,247.09</div>
            <div class="text-sm">
                <span class="font-medium text-yellow-600">97.4%</span>
            </div>
        </div>
        <div class="text-sm text-gray-500 dark:text-gray-400">Out of $6,000</div>
    </div>
    <!-- Chart -->
    <div class="grow">
        <MosaicPortal.Web.Components.Charts.LineChart
            CanvasId="saving-goals-chart"
            Height="262"
            Labels="@labels"
            Datasets="@datasets"
            ShowXAxis="false"
            ShowYAxis="false"
            UseTimeScale="true"
            ContainerClass="grow"/>
    </div>
</div>

@code {

    private List<string> labels = new()
    {
        "09-01-2023", "10-01-2023", "11-01-2023",
        "12-01-2023", "01-01-2024", "02-01-2024",
        "03-01-2024", "04-01-2024", "05-01-2024",
        "06-01-2024", "07-01-2024", "08-01-2024",
        "09-01-2024", "10-01-2024", "11-01-2024",
        "12-01-2024", "01-01-2025", "02-01-2025",
        "03-01-2025", "04-01-2025"
    };

    private List<MosaicPortal.Web.Components.Charts.LineChart.ChartDataset> datasets = new();

    protected override void OnInitialized()
    {
        datasets = new()
        {
            new MosaicPortal.Web.Components.Charts.LineChart.ChartDataset
            {
                Label = "Savings Progress",
                Data = new List<double>
                {
                    1500, 2000, 1800, 1900, 1900, 2400, 2900, 2600, 3900, 2700,
                    3500, 3200, 2900, 3500, 3600, 3400, 3900, 3600, 4100, 4100
                },
                BorderColor = "rgb(132, 112, 255)", // custom violet-500
                BackgroundColor = "rgba(132, 112, 255, 0.1)", // custom violet-500 with opacity
                Fill = true,
                Tension = 0.2,
                PointRadius = 0,
                PointHoverRadius = 3
            },
            new MosaicPortal.Web.Components.Charts.LineChart.ChartDataset
            {
                Label = "Expected Return",
                Data = new List<double>
                {
                    2000, 2100, 2200, 2300, 2400, 2500, 2600, 2700, 2800, 2900,
                    3000, 3100, 3200, 3300, 3400, 3500, 3600, 3700, 3800, 3900
                },
                BorderColor = "rgba(107, 114, 128, 0.25)",
                BackgroundColor = "transparent",
                Fill = false,
                Tension = 0.2,
                PointRadius = 0,
                PointHoverRadius = 3
            }
        };
    }

}
