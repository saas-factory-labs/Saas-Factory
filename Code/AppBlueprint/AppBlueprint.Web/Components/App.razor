<!DOCTYPE html>
<html lang="en" style="color-scheme: light;">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="color-scheme" content="light dark"/>
    <base href="/"/>

    <link rel="icon" type="image/png" href="favicon.png"/>

    @* Cruip Tailwind CSS Theme *@
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=fallback">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="_content/AppBlueprint.UiKit/cruip/css/app.css?v=4"/>
    <link rel="stylesheet" href="AppBlueprint.Web.styles.css"/>

    <HeadOutlet/>
</head>

<body class="font-inter antialiased bg-gray-100 dark:bg-gray-900 text-gray-600 dark:text-gray-400 sidebar-expanded">
<script>
    // Initialize sidebar state for Cruip template
    if (localStorage.getItem('sidebar-expanded') == 'true') {
        document.querySelector('body').classList.add('sidebar-expanded');
    } else {
        document.querySelector('body').classList.remove('sidebar-expanded');
    }

    // Initialize dark mode from localStorage
    // Default to light mode if no preference is stored
    var savedTheme = localStorage.getItem('theme') || 'light';

    // Debug logging - remove this after fixing
    console.log('[Theme Debug] Saved theme:', savedTheme);
    console.log('[Theme Debug] System prefers dark:', window.matchMedia('(prefers-color-scheme: dark)').matches);

    if (savedTheme === 'dark') {
        document.documentElement.classList.add('dark');
        document.documentElement.style.colorScheme = 'dark';
        console.log('[Theme Debug] Applied: DARK mode');
    } else if (savedTheme === 'light') {
        document.documentElement.classList.remove('dark');
        document.documentElement.style.colorScheme = 'light';
        console.log('[Theme Debug] Applied: LIGHT mode');
    } else if (savedTheme === 'system') {
        // System preference
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
            document.documentElement.style.colorScheme = 'dark';
            console.log('[Theme Debug] Applied: DARK mode (from system preference)');
        } else {
            document.documentElement.classList.remove('dark');
            document.documentElement.style.colorScheme = 'light';
            console.log('[Theme Debug] Applied: LIGHT mode (from system preference)');
        }
    }

    // Additional debug info
    console.log('[Theme Debug] HTML has dark class:', document.documentElement.classList.contains('dark'));
    console.log('[Theme Debug] Body background classes:', document.body.className);
</script>
<Routes @rendermode="RenderMode.InteractiveServer"/>

@* Navigation helper *@
<script src="js/navigationHelper.js"></script>

@* Cruip Tailwind Template Scripts *@
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="_content/AppBlueprint.UiKit/cruip/js/site.js?v=4"></script>

@* Blazor Framework *@
<script src="_framework/blazor.web.js"></script>

</body>
</html>


