// using AppBlueprint.Infrastructure.DatabaseContexts;
// // using AppBlueprint.Infrastructure.DatabaseContexts.B2B.Entities;
// // using AppBlueprint.Infrastructure.Repositories;
// using Microsoft.EntityFrameworkCore;
// using Microsoft.Extensions.Configuration;
// // using Testcontainers.PostgreSql;
// // using Moq;
// using System.Collections.Generic;
// using System.Linq;
// using System.Threading.Tasks;
// using TUnit.Assertions;
// using TUnit.Attributes;
//
// namespace AppBlueprint.Tests.Repositories;
//
// internal class TeamRepositoryTests
// {
//     // private readonly PostgreSqlContainer _postgreSqlContainer;
//     private readonly DbContextOptions<ApplicationDbContext> _dbContextOptions;
//     private readonly IConfiguration _configuration;
//
//     public TeamRepositoryTests()
//     {
//         // Mock IConfiguration to avoid missing dependencies
//         // var mockConfig = new Mock<IConfiguration>();
//         // _configuration = mockConfig.Object;
//
//         // Initialize PostgreSQL TestContainer
//         // _postgreSqlContainer = new PostgreSqlBuilder()
//         //     .WithDatabase("TestDb")
//         //     .WithUsername("postgres")
//         //     .WithPassword("yourStrong(!)Password")
//         //     .Build();
//
//         // Start the container properly
//         // _postgreSqlContainer.StartAsync().GetAwaiter().GetResult();
//
//         // Configure DbContext
//         _dbContextOptions = new DbContextOptionsBuilder<ApplicationDbContext>()
//             // .UseNpgsql(_postgreSqlContainer.GetConnectionString())
//             .Options;
//     }
//
//     [Test]
//     public async Task GetAllAsync_ReturnsAllTeams()
//     {
//         // Arrange
//         await using var context = new ApplicationDbContext(_dbContextOptions, configuration: _configuration);
//         // context.Teams.Add(new TeamEntity { Id = 1, Name = "Team1", IsActive = true });
//         // context.Teams.Add(new TeamEntity { Id = 2, Name = "Team2", IsActive = true });
//         await context.SaveChangesAsync();
//
//         // var repository = new TeamRepository(context);
//
//         // Act
//         // IEnumerable<TeamEntity>? teams = await repository.GetAllAsync();
//
//         // Assert
//         // await Assert.That(teams).IsNotNull();
//         // Assert.That(teams.Count()).IsEqualTo(2);
//     }
//
//     [Test]
//     public async Task GetByIdAsync_ReturnsTeam_WhenTeamExists()
//     {
//         // Arrange
//         await using var context = new ApplicationDbContext(_dbContextOptions, configuration: _configuration);
//         // var team = new TeamEntity { Id = 1, Name = "Team1", IsActive = true };
//         // context.Teams.Add(team);
//         await context.SaveChangesAsync();
//
//         // var repository = new TeamRepository(context);
//
//         // Act
//         // TeamEntity? result = await repository.GetByIdAsync(1);
//
//         // Assert
//         // await Assert.That(result).IsNotNull();
//         // Assert.That(result.Id).IsEqualTo(1);
//     }
// }



