<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-04-21T10:07:49.133253936"><title>Base runtime image | API-Reference</title><script type="application/json" id="virtual-toc-data">[{"id":"directory-packages","level":0,"title":"Directory.Packages","anchor":"#directory-packages"},{"id":"directory-build","level":0,"title":"Directory.Build","anchor":"#directory-build"},{"id":"nuget-config","level":0,"title":"NuGet.Config","anchor":"#nuget-config"},{"id":"package-versioning-nuget-docker","level":0,"title":"Package versioning (Nuget, Docker)","anchor":"#package-versioning-nuget-docker"},{"id":"dockerfile","level":0,"title":"Dockerfile","anchor":"#dockerfile"},{"id":"docker-compose","level":0,"title":"Docker Compose","anchor":"#docker-compose"},{"id":"login-to-github-registry-on-coolify-vm","level":0,"title":"Login to Github registry on Coolify VM","anchor":"#login-to-github-registry-on-coolify-vm"},{"id":"you-can-add-a-header","level":0,"title":"You can add a header","anchor":"#you-can-add-a-header"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Base runtime image | API-Reference"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="API-Reference Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/appblueprint-readme.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Base runtime image | API-Reference"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/appblueprint-readme.html#webpage",
    "url": "writerside-documentation/appblueprint-readme.html",
    "name": "Base runtime image | API-Reference",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "API-Reference Help"
}</script><!-- End Schema.org --></head><body data-id="AppBlueprint_README" data-main-title="Base runtime image" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Code///AppBlueprint"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>API-Reference  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="AppBlueprint_README" id="AppBlueprint_README.md">Base runtime image</h1><section class="chapter"><h2 id="directory-packages" data-toc="directory-packages">Directory.Packages</h2><p id="z9ibb04_10">Central package management for all C# projects. The package is referenced in each C# project' .csproj file without a version which is sourced from the Directory.Packages.props file:</p><div class="code-block" data-lang="markup">
&lt;PackageReference Include=&quot;Microsoft.EntityFrameworkCore&quot; /&gt;
</div><p id="z9ibb04_12">Location: Code/AppBlueprint/Directory.Packages.props</p><div class="code-block" data-lang="markup">
&lt;!-- This file is used to centrally define the versions of the packages used in the project --&gt;
&lt;Project&gt;
    &lt;PropertyGroup&gt;
        &lt;ManagePackageVersionsCentrally&gt;true&lt;/ManagePackageVersionsCentrally&gt;
    &lt;/PropertyGroup&gt;

    &lt;!-- Entity Framework Core and Database Providers --&gt;
    &lt;ItemGroup&gt;
        &lt;PackageVersion Include=&quot;Microsoft.EntityFrameworkCore&quot; Version=&quot;9.0.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.EntityFrameworkCore.Relational&quot; Version=&quot;9.0.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.EntityFrameworkCore.Design&quot; Version=&quot;9.0.1&quot;&gt;
            &lt;IncludeAssets&gt;runtime; build; native; contentfiles; analyzers; buildtransitive&lt;/IncludeAssets&gt;
            &lt;PrivateAssets&gt;all&lt;/PrivateAssets&gt;
        &lt;/PackageVersion&gt;
        &lt;PackageVersion Include=&quot;Npgsql&quot; Version=&quot;9.0.2&quot; /&gt;
        &lt;PackageVersion Include=&quot;Npgsql.EntityFrameworkCore.PostgreSQL&quot; Version=&quot;9.0.3&quot; /&gt;
        &lt;PackageVersion Include=&quot;AspNetCore.HealthChecks.NpgSql&quot; Version=&quot;9.0.0&quot; /&gt;
    &lt;/ItemGroup&gt;

    &lt;!-- Configuration and Compliance --&gt;
    &lt;ItemGroup&gt;
        &lt;PackageVersion Include=&quot;Microsoft.VisualStudio.Azure.Containers.Tools.Targets&quot; Version=&quot;1.21.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.Extensions.Http.Resilience&quot; Version=&quot;9.1.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.Extensions.ServiceDiscovery&quot; Version=&quot;9.0.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.Extensions.Http.Resiliency&quot; Version=&quot;9.1.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.Extensions.Hosting&quot; Version=&quot;9.0.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.Extensions.Configuration&quot; Version=&quot;9.0.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.Extensions.Configuration.Abstractions&quot; Version=&quot;9.0.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.Extensions.Configuration.UserSecrets&quot; Version=&quot;9.0.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.Extensions.Compliance.Abstractions&quot; Version=&quot;9.1.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.Extensions.Compliance.Redaction&quot; Version=&quot;9.1.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.Extensions.Compliance.Testing&quot; Version=&quot;9.1.0&quot; /&gt;
    &lt;/ItemGroup&gt;

    &lt;!-- ASP.NET Core and Middleware --&gt;
    &lt;ItemGroup&gt;
        &lt;PackageVersion Include=&quot;Microsoft.AspNetCore.Authentication.JwtBearer&quot; Version=&quot;9.0.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.IdentityModel.Tokens&quot; Version=&quot;8.3.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;System.IdentityModel.Tokens.Jwt&quot; Version=&quot;8.3.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.AspNetCore.Authorization&quot; Version=&quot;9.0.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.AspNetCore.DataProtection&quot; Version=&quot;9.0.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.AspNetCore.DataProtection.Abstractions&quot; Version=&quot;9.0.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.AspNetCore.OpenApi&quot; Version=&quot;9.0.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.AspNetCore.Components.Web&quot; Version=&quot;9.0.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.AspNetCore.App&quot; Version=&quot;2.2.8&quot; /&gt;
    &lt;/ItemGroup&gt;

    &lt;!-- OpenTelemetry Dependencies --&gt;
    &lt;ItemGroup&gt;
        &lt;PackageVersion Include=&quot;OpenTelemetry.Exporter.OpenTelemetryProtocol&quot; Version=&quot;1.11.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;OpenTelemetry.Extensions.Hosting&quot; Version=&quot;1.11.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;OpenTelemetry.Instrumentation.AspNetCore&quot; Version=&quot;1.11.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;OpenTelemetry.Instrumentation.Http&quot; Version=&quot;1.11.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;OpenTelemetry.Instrumentation.Runtime&quot; Version=&quot;1.11.0&quot; /&gt;
    &lt;/ItemGroup&gt;

    &lt;!-- Swashbuckle and OpenAPI --&gt;
    &lt;ItemGroup&gt;
        &lt;PackageVersion Include=&quot;Swashbuckle.AspNetCore&quot; Version=&quot;7.2.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Swashbuckle.AspNetCore.Filters&quot; Version=&quot;8.0.2&quot; /&gt;
        &lt;PackageVersion Include=&quot;Swashbuckle.AspNetCore.SwaggerGen&quot; Version=&quot;7.2.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Swashbuckle.AspNetCore.SwaggerUI&quot; Version=&quot;7.2.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.OpenApi&quot; Version=&quot;1.6.22&quot; /&gt;
        &lt;PackageVersion Include=&quot;Microsoft.OpenApi.Readers&quot; Version=&quot;2.0.0-preview5&quot; /&gt;
    &lt;/ItemGroup&gt;

    &lt;!-- Strawberry Shake (GraphQL) --&gt;
    &lt;ItemGroup&gt;
        &lt;PackageVersion Include=&quot;StrawberryShake&quot; Version=&quot;14.3.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;StrawberryShake.Transport.Http&quot; Version=&quot;14.3.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;StrawberryShake.Transport.WebSockets&quot; Version=&quot;14.3.0&quot; /&gt;
    &lt;/ItemGroup&gt;

    &lt;!-- MudBlazor and UI Components --&gt;
    &lt;ItemGroup&gt;
        &lt;PackageVersion Include=&quot;MudBlazor&quot; Version=&quot;8.2.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;MudBlazor.ThemeManager&quot; Version=&quot;3.0.0&quot; /&gt;
    &lt;/ItemGroup&gt;

    &lt;!-- Health Checks --&gt;
    &lt;ItemGroup&gt;
        &lt;PackageVersion Include=&quot;AspNetCore.HealthChecks.UI.Client&quot; Version=&quot;9.0.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;AspNetCore.HealthChecks.Redis&quot; Version=&quot;9.0.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;AspNetCore.HealthChecks.Uris&quot; Version=&quot;9.0.0&quot; /&gt;
    &lt;/ItemGroup&gt;

    &lt;!-- Testing Dependencies --&gt;
    &lt;ItemGroup&gt;
        &lt;PackageVersion Include=&quot;Testcontainers.PostgreSql&quot; Version=&quot;4.1.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Testcontainers&quot; Version=&quot;4.1.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;TestContainers.Container.Abstractions&quot; Version=&quot;1.5.4&quot; /&gt;
        &lt;PackageVersion Include=&quot;xunit&quot; Version=&quot;2.9.3&quot; /&gt;
        &lt;PackageVersion Include=&quot;xunit.runner.visualstudio&quot; Version=&quot;3.0.1&quot;&gt;
            &lt;PrivateAssets&gt;all&lt;/PrivateAssets&gt;
            &lt;IncludeAssets&gt;runtime; build; native; contentfiles; analyzers; buildtransitive&lt;/IncludeAssets&gt;
        &lt;/PackageVersion&gt;
        &lt;PackageVersion Include=&quot;coverlet.collector&quot; Version=&quot;6.0.3&quot;&gt;
            &lt;PrivateAssets&gt;all&lt;/PrivateAssets&gt;
            &lt;IncludeAssets&gt;runtime; build; native; contentfiles; analyzers; buildtransitive&lt;/IncludeAssets&gt;
        &lt;/PackageVersion&gt;
        &lt;PackageVersion Include=&quot;Microsoft.NET.Test.Sdk&quot; Version=&quot;17.12.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;TUnit&quot; Version=&quot;0.6.89&quot; /&gt;
        &lt;PackageVersion Include=&quot;TUnit.Assertions&quot; Version=&quot;0.6.89&quot; /&gt;
    &lt;/ItemGroup&gt;

    &lt;!-- Miscellaneous Dependencies --&gt;
    &lt;ItemGroup&gt;
        &lt;PackageVersion Include=&quot;FluentValidation&quot; Version=&quot;11.11.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;AutoBogus&quot; Version=&quot;2.13.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Bogus&quot; Version=&quot;35.6.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Newtonsoft.Json&quot; Version=&quot;13.0.3&quot; /&gt;
        &lt;PackageVersion Include=&quot;System.Text.Json&quot; Version=&quot;9.0.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;Serilog&quot; Version=&quot;4.2.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Stripe.net&quot; Version=&quot;47.2.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Spectre.Console&quot; Version=&quot;0.49.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;FigletFontArt&quot; Version=&quot;1.0.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Scalar.AspNetCore&quot; Version=&quot;1.2.75&quot; /&gt;
        &lt;PackageVersion Include=&quot;System.CommandLine&quot; Version=&quot;2.0.0-beta4.22272.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;System.CommandLine.NamingConventionBinder&quot; Version=&quot;2.0.0-beta4.22272.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;System.Configuration.ConfigurationManager&quot; Version=&quot;9.0.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;NetArchTest.Rules&quot; Version=&quot;1.3.2&quot; /&gt;
        &lt;PackageVersion Include=&quot;JetBrains.Annotations&quot; Version=&quot;2024.3.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Karambolo.PO&quot; Version=&quot;1.11.1&quot; /&gt;
        &lt;PackageVersion Include=&quot;MongoDB.Driver.Core&quot; Version=&quot;2.30.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Yarp.ReverseProxy&quot; Version=&quot;2.2.0&quot; /&gt;
    &lt;/ItemGroup&gt;

    &lt;!-- Application Hosting --&gt;
    &lt;ItemGroup&gt;
        &lt;PackageVersion Include=&quot;Aspire.Hosting.AppHost&quot; Version=&quot;9.0.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Aspire.Hosting.PostgreSQL&quot; Version=&quot;9.0.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Aspire.Hosting.Redis&quot; Version=&quot;9.0.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Aspire.Hosting.Testing&quot; Version=&quot;9.0.0&quot; /&gt;
    &lt;/ItemGroup&gt;

    &lt;!-- API Versioning --&gt;
    &lt;ItemGroup&gt;
        &lt;PackageVersion Include=&quot;Asp.Versioning.Mvc&quot; Version=&quot;8.1.0&quot; /&gt;
        &lt;PackageVersion Include=&quot;Asp.Versioning.Mvc.ApiExplorer&quot; Version=&quot;8.1.0&quot; /&gt;
    &lt;/ItemGroup&gt;
&lt;/Project&gt;
</div></section><section class="chapter"><h2 id="directory-build" data-toc="directory-build">Directory.Build</h2><p id="z9ibb04_14">Location: Code/AppBlueprint/Directory.Build.props</p><div class="code-block" data-lang="markup">
&lt;!-- This file is used to define the common properties for all projects in the solution --&gt;
&lt;Project&gt;
    &lt;PropertyGroup&gt;
        
        &lt;Targetframework&gt;net9.0&lt;/Targetframework&gt;
        &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;
        &lt;Nullable&gt;enable&lt;/Nullable&gt;

        &lt;!-- Enable source code analysis using sonar nuget package --&gt;
        &lt;AnalysisLevel&gt;latest&lt;/AnalysisLevel&gt;
        &lt;AnalysisMode&gt;All&lt;/AnalysisMode&gt;
        &lt;TreatWarningsAsErrors&gt;false&lt;/TreatWarningsAsErrors&gt;
        &lt;CodeAnalysisTreatWarningsAsErrors&gt;false&lt;/CodeAnalysisTreatWarningsAsErrors&gt;
        &lt;EnforceCodeStyleInBuild&gt;false&lt;/EnforceCodeStyleInBuild&gt;
        
        &lt;!-- Enable packaging the shared projects to Nuget package files --&gt;        
        &lt;IsPackable&gt;true&lt;/IsPackable&gt;
        &lt;GeneratePackageOnBuild&gt;true&lt;/GeneratePackageOnBuild&gt;
        &lt;GeneratePackage&gt;true&lt;/GeneratePackage&gt;                
        &lt;Authors&gt;Casper Rubæk&lt;/Authors&gt;
        &lt;Company&gt;SaaS Factory&lt;/Company&gt;
        &lt;Copyright&gt;© SaaaS Factory&lt;/Copyright&gt;
        &lt;Description&gt;Shared .nuget packages for Appblueprint template from Shared-Modules folder&lt;/Description&gt;        
        &lt;RepositoryUrl&gt;https://github.com/Trubador/SaaS-Factory&lt;/RepositoryUrl&gt;
        &lt;RepositoryType&gt;git&lt;/RepositoryType&gt;        
    &lt;/PropertyGroup&gt;

    &lt;!-- Enable source code analysis using sonar nuget package across all projects except docker projects eg. .dcproj --&gt;
    &lt;ItemGroup Condition=&quot;'$(MSBuildProjectExtension)' != '.dcproj'&quot;&gt;
&lt;!--        Version=&quot;*&quot;--&gt;
&lt;!--        &lt;PackageReference Include=&quot;SonarAnalyzer.CSharp&quot; &gt;--&gt;
&lt;!--            &lt;PrivateAssets&gt;all&lt;/PrivateAssets&gt;--&gt;
&lt;!--            &lt;IncludeAssets&gt;--&gt;
&lt;!--                runtime; build; native; contentfiles; analyzers; buildtransitive--&gt;
&lt;!--            &lt;/IncludeAssets&gt;--&gt;
&lt;!--        &lt;/PackageReference&gt;--&gt;
    &lt;/ItemGroup&gt;

&lt;/Project&gt;
</div></section><section class="chapter"><h2 id="nuget-config" data-toc="nuget-config">NuGet.Config</h2><p id="z9ibb04_16">Location: Code/AppBlueprint/NuGet.Config</p><div class="code-block" data-lang="markup">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;configuration&gt;
    &lt;packageSources&gt;
        &lt;add key=&quot;nuget.org&quot; value=&quot;https://api.nuget.org/v3/index.json&quot; protocolVersion=&quot;3&quot; /&gt;
        &lt;!-- &lt;add key=&quot;LocalNugetFeed&quot; value=&quot;C:\Development\LocalNugetFeed&quot; /&gt; --&gt;
        &lt;add key=&quot;trubador-github&quot; value=&quot;https://nuget.pkg.github.com/Trubador/index.json&quot; /&gt;
    &lt;/packageSources&gt;

    &lt;packageSourceMapping&gt;
        &lt;packageSource key=&quot;nuget.org&quot;&gt;
            &lt;package pattern=&quot;*&quot; /&gt;            
        &lt;/packageSource&gt;
        &lt;!-- &lt;packageSource key=&quot;LocalNugetFeed&quot;&gt; --&gt;
        &lt;!--     &lt;package pattern=&quot;*&quot; /&gt; --&gt;
        &lt;!-- &lt;/packageSource&gt; --&gt;
        &lt;packageSource key=&quot;trubador-github&quot;&gt;
            &lt;package pattern=&quot;AppBlueprint.*&quot; /&gt;
            &lt;package pattern=&quot;SaaS-Factory.*&quot; /&gt;
        &lt;/packageSource&gt;
    &lt;/packageSourceMapping&gt;

    &lt;config&gt;
        &lt;add key=&quot;globalPackagesFolder&quot; value=&quot;packages&quot; /&gt;
    &lt;/config&gt;

    &lt;packageSourceCredentials&gt;
        &lt;trubador-github&gt;
            &lt;add key=&quot;Username&quot; value=&quot;Trubador&quot; /&gt;
            &lt;add key=&quot;ClearTextPassword&quot; value=&quot;%GITHUB_TRUBADOR_PAT%&quot;  /&gt;
        &lt;/trubador-github&gt;
    &lt;/packageSourceCredentials&gt;
&lt;/configuration&gt;

</div></section><section class="chapter"><h2 id="package-versioning-nuget-docker" data-toc="package-versioning-nuget-docker">Package versioning (Nuget, Docker)</h2><p id="z9ibb04_18">Set this property in the .csproj file of a C# project to enable automatic versioning using the gitversion tool:</p><div class="code-block" data-lang="markup">
&lt;PropertyGroup&gt;
        &lt;Version&gt;$(GITVERSION_SemVer)&lt;/Version&gt;
&lt;/PropertyGroup&gt;
</div><p id="z9ibb04_20">Add these steps in the Workflow for publishing packages to Github at .github/workflows/publish-nuget-packages-github-packages.yml:</p><div class="code-block" data-lang="yaml">
- name: Install GitVersion
        run: dotnet tool install --global GitVersion.Tool

      - name: Debug GitVersion Output
        run: |
          dotnet-gitversion /output json || echo &quot;GitVersion failed!&quot;

      - name: Determine Version
        id: gitversion
        run: |
          RAW_VERSION=$(dotnet-gitversion /output json 2&gt;/dev/null || echo '{}')
          echo &quot;Raw GitVersion Output: $RAW_VERSION&quot;
          VERSION=$(echo &quot;$RAW_VERSION&quot; | jq -r '.SemVer // empty')
          
          if [[ -z &quot;$VERSION&quot; ]]; then
            echo &quot;GitVersion failed to generate a version. Check Git tags and branch naming.&quot;
            exit 1
          fi
          
          echo &quot;VERSION=$VERSION&quot; &gt;&gt; $GITHUB_ENV
        shell: bash
</div></section><section class="chapter"><h2 id="dockerfile" data-toc="dockerfile">Dockerfile</h2><p id="z9ibb04_22">Building a Dockerfile:</p><div class="code-block" data-lang="bash">
cd Code/AppBlueprint
docker build -f AppBlueprint.Web/Dockerfile . -t appblueprint-web:dev
</div><p id="z9ibb04_24">This ensures that the build context has access to the files in the Code/AppBlueprint directory needed to pull in dependendant files and C# projects to build the Dockerfile</p><div class="code-block" data-lang="none">
# Base runtime image
FROM mcr.microsoft.com/dotnet/aspnet:9.0 AS base
USER app
WORKDIR /app
EXPOSE 443

# Build stage
FROM mcr.microsoft.com/dotnet/sdk:9.0 AS build
ARG BUILD_CONFIGURATION=Release
ARG GITHUB_TRUBADOR_PAT

# Install SSL libraries for HTTPS
RUN apt-get update &amp;&amp; apt-get install -y libssl-dev

WORKDIR /src

# Copy the central package management file and NuGet config from AppBlueprint directory
COPY Directory.Packages.props ./
COPY NuGet.Config /root/.nuget/NuGet.Config

# Replace the token placeholder in NuGet config
RUN sed -i &quot;s|%GITHUB_TRUBADOR_PAT%|$GITHUB_TRUBADOR_PAT|g&quot; /root/.nuget/NuGet.Config

# Copy project files
COPY [&quot;AppBlueprint.Web/AppBlueprint.Web.csproj&quot;, &quot;AppBlueprint.Web/&quot;]
COPY [&quot;AppBlueprint.ServiceDefaults/AppBlueprint.ServiceDefaults.csproj&quot;, &quot;AppBlueprint.ServiceDefaults/&quot;]

# Restore packages (Now using the updated NuGet config with correct GitHub token)
RUN dotnet restore &quot;AppBlueprint.Web/AppBlueprint.Web.csproj&quot;

# Copy the rest of the source code
COPY . .

WORKDIR &quot;/src/AppBlueprint.Web&quot;
RUN dotnet build &quot;AppBlueprint.Web.csproj&quot; -c $BUILD_CONFIGURATION -o /app/build

# Publish stage
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish &quot;AppBlueprint.Web.csproj&quot; -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# Final runtime image
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT [&quot;dotnet&quot;, &quot;AppBlueprint.Web.dll&quot;]
</div></section><section class="chapter"><h2 id="docker-compose" data-toc="docker-compose">Docker Compose</h2><p id="z9ibb04_26">Location: Code/AppBlueprint/docker-compose.yml</p></section><section class="chapter"><h2 id="login-to-github-registry-on-coolify-vm" data-toc="login-to-github-registry-on-coolify-vm">Login to Github registry on Coolify VM</h2><div class="code-block" data-lang="bash">
$: docker login ghcr.io -u Trubador
$: Password:
$: WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
$: Configure a credential helper to remove this warning. See
$: https://docs.docker.com/engine/reference/commandline/login/#credentials-store
$: Login Succeeded
</div><ol class="list _decimal" id="z9ibb04_28" type="1"><li class="list__item" id="z9ibb04_36"><p>First list item </p><ul class="list _bullet" id="z9ibb04_37"><li class="list__item" id="z9ibb04_38"><p>First nested list item </p><ul class="list _bullet" id="z9ibb04_39"><li class="list__item" id="z9ibb04_40"><p>Second nested list item</p></li></ul></li></ul></li></ol><aside class="prompt" data-type="tip" data-title="" id="z9ibb04_29"><p id="z9ibb04_41">[!NOTE] Useful information that users should know, even when skimming content.</p></aside><aside class="prompt" data-type="tip" data-title="" id="z9ibb04_30"><p id="z9ibb04_42">[!TIP] Helpful advice for doing things better or more easily.</p></aside><aside class="prompt" data-type="tip" data-title="" id="z9ibb04_31"><p id="z9ibb04_43">[!IMPORTANT] Key information users need to know to achieve their goal.</p></aside><aside class="prompt" data-type="tip" data-title="" id="z9ibb04_32"><p id="z9ibb04_44">[!WARNING] Urgent info that needs immediate user attention to avoid problems.</p></aside><aside class="prompt" data-type="tip" data-title="" id="z9ibb04_33"><p id="z9ibb04_45">[!CAUTION] Advises about risks or negative outcomes of certain actions.</p></aside></section><section class="chapter"><h2 id="you-can-add-a-header" data-toc="you-can-add-a-header">You can add a header</h2><p id="z9ibb04_46">You can add text within a collapsed section.</p><p id="z9ibb04_47">You can add an image or a code block, too.</p><div class="code-block" data-lang="ruby">
   puts &quot;Hello World&quot;
</div></section><div class="last-modified">Last modified: 09 February 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="changelog.html" class="navigation-links__prev">CHANGELOG.md</a><a href="security.html" class="navigation-links__next">Security Policy</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>